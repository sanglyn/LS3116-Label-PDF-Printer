# 📄 **Label PDF Printer v0.5**

### **Formtec LS-3116 (2×3) / LS-3114 (2×4) 라벨용지에 여러 PDF 라벨을 자동·정밀 배치하는 웹 앱**

---

## 🚀 프로젝트 목적

일반적인 물류·택배 라벨 작업에서 다음과 같은 문제가 꾸준히 발생합니다:

### ❌ **여러 개의 개별 패킹라벨(PDF) 또는 다중 페이지 PDF를 라벨지에 맞춰 배치하기가 매우 어려움**

- Amazon, Qxpress, Shopee, Coupang 등에서 내려받는 라벨 PDF가
  *각 페이지마다 개별 라벨 1장*으로 구성되어 있음
- **여러 장을 하나의 라벨지에 정확히 배치하는 기능을 제공하는 프로그램이 거의 없음**
- Formtec 공식 프로그램조차 **복수 PDF → 자동 정렬 기능 없음**

### ❌ **이미 소모한 칸(스티커)을 다시 인쇄하지 않도록 조정하기 어려움**

- 라벨지를 부분 사용한 뒤 나머지 칸에만 다시 인쇄해야 할 때
- 대부분의 프로그램은 "특정 칸만 출력" 기능이 매우 제한적

---

## ✅ **이 웹앱이 해결하는 문제**

본 프로그램은 **PDF 라벨을 자동 분해 → 2×3 / 2×4 슬롯에 자동 배치 → 수동 편집 → 오프셋 미세 조정 → PDF 출력**을 모두 지원하는
**완전한 클라이언트 사이드 라벨 프린팅 솔루션**입니다.

---

## ✨ **주요 기능**

### **1. 듀얼 레이아웃 지원 (v0.5 NEW!)**

- **LS-3116 (2×3)**: 6칸 레이아웃, 라벨 크기 99.1×93.1mm
- **LS-3114 (2×4)**: 8칸 레이아웃, 라벨 크기 99.1×67.7mm
- 라디오 버튼으로 간편하게 전환
- **고정 크기 페이지 보드**: 레이아웃 변경 시에도 보드 크기는 동일 (A4 비율 유지)

### **2. PDF 업로드 → 페이지 단위로 자동 분해**

- 업로드된 PDF의 **모든 페이지를 개별 라벨로 자동 인식**
- 예: 10페이지 PDF → 10개의 라벨 슬롯 객체로 변환
- 멀티라인 텍스트 지원으로 긴 파일명도 깔끔하게 표시

### **3. 자동 배치 (Auto Assignment)**

- 선택된 레이아웃(2×3 또는 2×4)에 맞춰 자동 배치
- 부족하면 자동으로 새 페이지 추가
- 최대 40페이지 지원

### **4. 완전한 커스텀 배치 기능**

#### ● 클릭 이동

- 슬롯 클릭 → 해당 라벨 "선택"
- 빈 슬롯을 클릭 → 선택된 라벨을 그 칸으로 "이동"
- 이미 배정된 슬롯은 **클릭으로는 교환되지 않음** (실수 방지)

#### ● 드래그 앤 드롭

- 라벨 간 "교환(swap)" 가능
- 다른 페이지 간 이동 가능
- 클릭 기능과 혼동되지 않도록 설계

### **5. 수동 라벨지 재사용 기능**

이미 사용한 스티커 칸은 **지워두고**
남은 칸에만 새 라벨을 배치할 수 있음.

```
[X][X]
[ ][ ]
[ ][ ]
```

필요한 빈 칸에만 추가 배치 → 낭비 없는 인쇄 가능.

### **6. 개선된 UI/UX (v0.5 NEW!)**

- **카드 아코디언**: 모든 섹션 접기/펼치기 가능 (공간 절약)
- **컴팩트 레이아웃 선택**: 40% 작아진 라벨 선택 섹션
- **2열 오프셋 그리드**: 전체 오프셋과 칸 기본 오프셋을 나란히 배치
- **스케일 모드 재배치**: 프리셋 설정 전에 표시하여 워크플로우 개선

### **7. 오프셋 / 축소율 고급 조정 기능**

라벨지 출력이 미세하게 틀어지는 문제를 해결하기 위한 정밀 조정 기능.

#### 전체 슬롯 오프셋

- 용지 전체를 X/Y 방향으로 미세 조정
- A4 기준 좌표계 (mm 단위)

#### 개별 슬롯 정밀 조정

- 각 슬롯별로 독립적인 X/Y/축소% 설정 가능
- 세부 오프셋 아코디언으로 깔끔하게 정리

### **8. 프리셋 제공 (v0.5 개선!)**

| Preset           | X(mm) | Y(mm) | Scale(%) | 비고               |
| ---------------- | ----- | ----- | -------- | ------------------ |
| **트랙스로지스** | 3     | -3    | 100      | 기본값 (자동 적용) |
| **쇼피 SLS**     | 5     | -2    | 90       |                    |
| **프리셋 없음**  | 0     | 0     | 100      | 초기화용           |

- 페이지 로드 시 트랙스로지스 프리셋 자동 적용
- 활성 프리셋은 파란색 배경으로 표시

### **9. 스케일 모드 (v0.4+)**

- **ORIGINAL**: PDF 원본 크기 존중 (텍스트/바코드 크기 우선)
- **FIT_WIDTH**: 라벨 가로폭에 맞게 비율 유지
- 안전 모드(clipToSlot): 슬롯 밖으로 나가지 않도록 자동 축소

### **10. PDF 생성 및 미리보기**

- **pdf-lib** 기반으로 PDF 내부 페이지를 slot 영역에 clip 후 삽입
- 오프셋·스케일·가이드 라벨 적용
- 생성 즉시 iframe 미리보기 제공
- 다운로드 기능 지원

---

## 📐 **라벨지 구조**

라벨지는 A4 세로(Portrait) 기준:

### 페이지 크기

$210\,\text{mm} \times 297\,\text{mm}$

### LS-3116 레이아웃

$2 \text{ columns} \times 3 \text{ rows}$ = 6칸  
라벨 크기: 99.1mm × 93.1mm

```
[ ][ ]
[ ][ ]
[ ][ ]
```

### LS-3114 레이아웃

$2 \text{ columns} \times 4 \text{ rows}$ = 8칸  
라벨 크기: 99.1mm × 67.7mm

```
[ ][ ]
[ ][ ]
[ ][ ]
[ ][ ]
```

---

## 🗂️ **프로젝트 파일 구조**

```txt
/
│── index.html        # UI 구조 · 카드 아코디언 · 듀얼 레이아웃
│── script.js         # PDF 분해 · 배치 · 오프셋 · 프리셋 · PDF 생성
│── styles.css        # 전체 UI · 아코디언 · 2열 그리드 · 고정 페이지 보드
└── README.md
```

---

## 🔧 **기술 스택**

- **Vanilla JavaScript**
- **pdf-lib** (PDF 조작)
- **HTML5 / CSS3**
- **100% Client-Side** (브라우저에서만 동작)
  → GitHub Pages로 올리면 **설치 없이 바로 실행**

---

## 🆕 **v0.5 주요 변경사항**

### UI/UX 개선

✅ LS-3114 (2×4) 레이아웃 추가  
✅ 카드 아코디언 UI (모든 섹션 접기/펼치기)  
✅ 라벨 선택 섹션 40% 높이 축소  
✅ 2열 오프셋 그리드 레이아웃  
✅ 페이지 보드 고정 크기 (210×260px)

### 프리셋 개선

✅ 트랙스로지스 기본값 자동 적용  
✅ 프리셋 없음: 축소 100% (기존 95% 수정)  
✅ 프리셋 상태 시각화 개선

### 버그 수정

✅ CSS 구문 오류 수정  
✅ 카드 오버플로우 해결  
✅ 슬롯 크기 자동 조정

---

## 📜 License

MIT License

---

## 🙌 Special Notes

- 이 도구는 실제 물류 작업에서 **패킹라벨 재배치에 스트레스를 받는 사용자 경험**을 기반으로 개발됨
- "이미 출력해버린 라벨지 일부 칸을 제외하고 출력" 기능은 현업 사용자에게 가장 강력한 UX 개선 요소로 평가됨
- 완전 오프라인/웹 브라우저에서 동작하므로 **민감한 라벨 정보도 안전하게 처리 가능**
- v0.5부터 LS-3116과 LS-3114 두 가지 레이아웃을 모두 지원하여 활용도 향상
